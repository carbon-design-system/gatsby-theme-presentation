import { Notes, Appear, Head } from "mdx-deck";
import { Split } from "gatsby-theme-mdx-deck";
import DeckTheme from "./theme.js";
import Wow from "./wow2.png";
import Quotes from "./Quotes";
import Demo from "./Demo";
import "./deck.css";
import Hexagon from "./Hexagon";
import Intro from "./Intro.js";
export const theme = DeckTheme;
import Backstory from "./Backstory.js";

import chart from "./compare-cra-gatsby-next.png";

<Head>
  <title>FEDucation</title>
</Head>

<Intro />

---

## Agenda

- React, Gatsby and MDX
- Git Monorepos
- Gatsby Themes
- Gatsby Themes at IBM

<Notes>

@vince @scott I think ending on Gatsby Themes is a good transition point that way I can kind of gloss over the idea and yall pull it in with additional thoughts and the practical application, transitioning into yalls piece

</Notes>

---

## React & Gatsby

<p style={{maxWidth: '80vw'}}>"Gatsby is a free and open source framework based on React that helps developers build blazing fast websites and apps"</p>


<Notes>

React is a component-driven JavaScript framework Gatsby is known as a SSG, with a React & GraphQL development experience

Gatsby removes the pipeline headache of React development (from a purist and CRA standpoint)

- choosing and setting up Router
- chasing the perfect Webpack config (bundle size, code splitting for load prioritization, effective tree shaking, etc)
- perfecting Babel config

</Notes>

---

# Gatsby

- Query data with GraphQL (site metadata)
- Built-in routing, image lazy-loading, build pipeline
- use data from anywhere with `gatsby-source-*` modules
- diverse plugin ecosystem
- builds to static assets

<Notes>

https://www.gatsbyjs.org/docs/querying-with-graphql/

Example plugins:

- gatsby-plugin-mdx
- gatsby-source-filesystem
- gatsby-transformer-yaml
- gatsby-source-contentful
- gatsby-plugin-manifest

</Notes>

---

## MDX

MDX is a superset of markdown<br />
Markdown for the component era<br />
Use React components in your content

<Notes>

Much easier to read at a fast pace than HTML easy to write, small learning curve

</Notes>

---

```jsx
---
title: Analytics Dashboard
---

import Chart from "../components/Chart";

# App Metrics

<div style={{ padding: "1rem 2rem" }}>
  <Chart />
</div>
```

<Notes>

Sample file demonstrating using JSX in Markdown

- frontmatter (think metadata for content)
- component import and use
- inline HTML with JSX style attributes

</Notes>

---

```jsx
---
title: Analytics Dashboard
description: Application metrics...
tags: ["analytics", "metrics", "dashboard"]
---

# App Metrics

<div style={{ padding: "1rem 2rem" }}>
  <Chart />
</div>
```

<Notes>

Sample personal site MDX home page w/ expanded frontmatter for use with `react-helmet`

- custom shortcode: `Chart`
- added frontmatter keys to inject in SEO; `head`
- title can be added to tab title with a template; `Analytics Dashboard | My Site`
- SEO tags can be appended to tags set as global

https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet/?=helmet

</Notes>

---

## Git Monorepos
single Git repository with multiple project roots

```shell
| packages/
|   -- example-site/
|      -- package.json
|   -- components/
|      -- package.json
| package.json
```

<Notes>

The idea is to have multiple project roots in a single repository These can be tightly or loosely-coupled, or completely unrelated This architecture has shown to be quite prominent with React projects, paramount for composing Gatsby themes

Examples of packages:

- components
- tools
- theme
- app/site

w/ yarn workspaces (or also lerna)

Fun with workspaces (see https://github.com/gatsbyjs/gatsby):

- all subdirectories do _not_ have to be in the array of root's workspaces declared in `/package.json`
- but subdirectories themselves can also be workspaces roots

</Notes>

---

# Git Monorepos

Used with [Yarn workspaces](https://yarnpkg.com/lang/en/docs/workspaces/) at the project root

```shell
# install dependencies
yarn install

# run Gatsby example-site
yarn workspace example-site run start
```

<Notes>

PROS:

- Project dependencies are installed together
- Will install local dependency first (if exists), then reaches to registry
- Single lockfile
- can lock project versions across packages

CONS:

- locked project versions across packages
- larger footprint
- loss of per-project security

https://yarnpkg.com/lang/en/docs/workspaces/ https://en.wikipedia.org/wiki/Monorepo

</Notes>

---

# Gatsby Themes

> horizontally-composed layers for Gatsby sites

<Notes>

@vince we can transition here

PROS:

- used to add layers of functionality
  - blog, glossary
  - (or just data) Shopify, weather

</Notes>

---

<iframe
  src="https://themejam.gatsbyjs.org/showcase"
  frameborder="0"
  width="90%"
  height="90%"
/>

<Notes>

We can omit this if we want, placeholder to show examples of community themes

</Notes>

---

<h2 ><a style={{color: 'white'}} href="https://gatsby-theme-carbon.now.sh">https://gatsby-theme-carbon.now.sh</a></h2>

---

# Outline

1. Carbon's website backstory ‚Äì üåßÔ∏è
1. Enter Gatsby themes ‚Äì üå§Ô∏è
1. Aha! moments of themes ‚Äì ‚òÄÔ∏è

---

# Carbon's website backstory

<Backstory />

<Notes>

## - Difficult for content authors and designers to contribute

## - Big win for empowering non-technical contributors

## - Only option was to fork Carbon

---

### Pitfalls

## - No way to get new features or fixes.

## - Developers stuck with config they don't own/understand

</Notes>

---

# Other teams at IBM wanted in

- Process was to fork and copy the Carbon website
- Needed to understand configuration settings
- No design updates
- No bug fixes

---

# Enter Gatsby themes

---

# Big wins with Gatsby themes

- Development speed
- Visual solidarity
- Shared features and fixes
- Theme-managed configuration

<Notes>

- speed
  - Broke ground April 15th,
  - 2 teams with June 1st deadline (45 days)
  - both teams with 0 no react and no gatsby experience
  - 3. Both hit June 1st deadline
- unity through core UI components and global MDX
- community envolvement grew due to shared tooling
  - in core theme components (edit in Github)
  - in MDX content components
- only manage the dependancies & config you want (progressive disclosure)

## transition: big win for devs, shadowing another new big win

</Notes>

---

## Revelations while building with themes

1. Oh wow. Actually just writing fancy markdown tho
1. Can't be blocked by theme
1. Immense power of shadowing

<Notes>

# In order

## - 2. big selling point for teams considering

</Notes>

---

# What is shadowing?

<ul>
<li>Allows developers to augment or replace files in a theme</li>

<Appear>

<li>Shadowed files go in directory named after the theme
<ul>
<li className="list-p">

ex. `src/gatsby-theme-carbon/components/Footer.js`

</li>
<li>anything in this folder replaces the theme's version</li>
</ul>
</li>
<li>

The theme will reach for _your_ component first

</li>
<li>Shadowed components receive same props</li>

</Appear>

</ul>

<Notes>

# Content heavy slide

</Notes>

---

# Shadowing revelations

<img style={{ width: "60vw" }} src={Wow} />

<span style={{fontWeight: 300, fontSize: '0.6em', color: 'darkgrey', position: 'absolute', bottom: '-0.5em'}}>

**note:** the Carbon designers did not approve this slide

</span>

<Notes>

# At least the first one to get rid of filler content

</Notes>

---

# Shadow to provide props

```jsx
import Header from "gatsby-theme-carbon/src/components/Header";

const CustomHeader = props => (
  <Header {...props}>
    <span>Gatsby theme </span>Carbon
  </Header>
);

export default CustomHeader;
```

<Notes>

# Don't forget to spread props

</Notes>

---

# Shadow whole components

```jsx
import { styles } from "@carbon/type";

const CustomHeader = styled.span({
  ...styles.expressiveHeading04
});

export default props => {
  console.log(props);
  return <CustomHeader>Gatsby Theme Carbon</CustomHeader>;
};
```

<Notes>

# Here we're creating our own novel component

# no need to import

# Log to view props

</Notes>

---

# Shadow _everything_

- Sass ‚Äì `src/components/Markdown.module.scss`
- Data ‚Äì `src/components/Code/prismTheme.js`
- Hooks - `src/util/hooks/useSearch.js`

<Notes>

## - Hooks are a new react API that allow you to encapsulate logic/behavior

## - shadowing hook to provide 3rd party search

## - reveals search component

</Notes>

---

# Shadowing guidelines

1. Communication
1. Less is more
1. Communication

<Notes>

## - to make sure no one is working on your change already

## - Shadow as few files as you can to achieve your goal

## - If you do shadow, tell the theme developer, used to inform future development

</Notes>

---

<Quotes />

---

## Building with themes<br />Scott Strubberg

- Fairly simple learning curve
- Flexibility: easily use React while adhering to IDL
- #carbon-gatsby-theme channel

---

<Demo src="https://idr-public.netlify.com/" title="IBM Design Research" />

<Notes>

- ## Switcher
- ## Familiar navigation/IA

</Notes>

---

<Demo
  src="https://design-language-website.netlify.com/"
  title="IBM Design Language"
/>

<Notes>

- ## Switcher
- ## Familiar navigation/IA

</Notes>

---

<Demo src="https://www.ibm.com/design/ai/" title="IBM Design for AI" />

<Notes>

- Signature homepage
- ## a11y (skip to content, tab control, return to top)

</Notes>

---

# Gatsby Theme takeaways

<ul>
  <li>Themes empower content authors</li>
  <Appear>
    <li>Themes save developers time and overhead</li>
    <li>Themes encourage community contribution</li>
    <li>Themes align teams on form and function</li>
    <li>Shadow things. Not too much. Mostly to provide props.</li>
  </Appear>
</ul>

<Notes>

- ## content authors and designers contribute like never before

- ## also complexity overhead

</Notes>

---

# Thanks!

---

# Q & A
